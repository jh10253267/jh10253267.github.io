---
layout: post
title:  "AWS-EC2"
author: 악어새62
categories: [ TIL, WEB, Backend ]
tags: [ ]
image: assets/images/5.jpg
---
## AWS 개요

클라우드란 온프레미스와 반대되는 개념으로 우리가 사용하는 전기, 수도, 아파트를 생각하면 쉽다.

우리는 직접 전기를 만들어서 사용하지 않고 수도, 아파트 관리 등도 마찬가지다. 아파트에선 승강기, 단지 내 시설등을 제공하고 우리는 그 비용을 지불한다.  
이런 것을 클라우드 서비스라고 한다.  
규모의 경제라고 생각해도 무방하다.

온프레미스는 직접 집을 설계하고 배관과 같은 시스템을 직접 알아보고 의뢰해야하는 상황과 비슷하다.  
많은 시간과 노력이 필요하다.
작은 서비스를 제공하는데도 직접 물리적 서버를 구축하고 관리한다. 이렇게 되면 사용자가 많든 적든 일정 비용을 지불해야한다.  
이것이 온프레미스의 단점이다.

클라우드는 구축하려는 서비스에 필요한 리소스를 사용하고 사용한 양만큼 비용을 지불하는 구조다.  
여러가지 클라우드 컴퓨팅 서비스가 있지만 그 중 대표적인 것이 바로 AWS다.

AWS에서도 여러가지의 서비스를 지원하고 있는데 EC2부터 살펴보자.

## AWS EC2인스턴스 생성

EC2는 **E**lastic **C**ompute **C**loud의 약자로 AWS 클라우드 가상 서버를 제공하는 서비스다.

EC2를 이용하면 지금까지 네트워크 테스트용 ip라서 다른 사람이 접속할 수 없는 `127.0.0.1`이 아닌 누구나 접속할 수 있는 주소로 우리의 웹 프로젝트를 배포할 수 있다.

왼쪽 상단에 AWS 로고가 있고 그 옆을 보면 검색창이 보인다 여기서 ec2를 검색하고 들어간 뒤 우측 상단을 보면 리전을 선택할 수 있다.  
AWS에서는 도시별로 클라우드 센터를 지어 해당 센터에서 구축된 가상 머신을 사용할 수 있는데 이걸 선택해주는 것이다.  
현재 서울 리전이 사용가능해서 서울을 선택하는 편이 좋다. 물리적 거리가 멀면 그 만큼 네트워크 속도가 느려지기 때문이다.
<img width="260" alt="스크린샷 2024-09-02 시간: 23 29 10" src="https://github.com/user-attachments/assets/d6d1cb3e-2d77-4957-aac9-6b35ee3ce57e">

화면 중앙을 보면 인스턴스 시작 버튼이 보인다. 누르면 가상 서버를 만들 수 있다.
<img width="376" alt="스크린샷 2024-09-02 시간: 23 29 29" src="https://github.com/user-attachments/assets/1cb15b76-b65a-437b-ae51-78902ce2d91b">

1. 태그 : 태그는 쉽게 말해 가상 서버를 구분하는 이름이다. 데이터베이스를 만들 때 이름을 지어주듯이 똑같은 개념이다.
2. 그 후 인스턴스 유형을 선택하는데 프리티어에서 사용 가능한 `t2.micro`를 선택한다/프리티어란 월별 750시간을 무료로 사용할 수 있는 요금제, 혹은 스펙이라고 보면 된다.
3. 키페어는 SSH접속을 위해 필수로 생성해주어야한다. 옆의 새 키 페어 생성을 눌러준 뒤 기본 설정으로 생성해준다. 이렇게 하면 파일 형태로 키를 발급해주는데 다시 다운받을 수 없기 때문에 안전한 곳에 저장해준다.

그 다음으론 고정 IP를 설정해주어야한다.  
인스턴스는 하나의 서버로 IP가 존재한다. 인스턴스 생성시 항상 새로운 IP를 할당해준다. 이미 만들어둔 EC2 인스턴스를 재시작하더라도 다시 IP를 할당받는다. 따라서 매번 아이피를 확인하고 접속해야한다. 이런 번거로움을 줄이기 위해 고정 IP를 할당받아 사용할 수 있다.
그 이름은 탄력적 IP로 다음과 같이 할당해주면 된다.
사진

주의해야할 점은 탄력적 IP도 하나의 고유한 AWS의 자원으로 EC2를 종료하거나 삭제하더라도 탄력적 IP를 해제하지 않으면 계속 비용이 나간다. 만약 EC2인스턴스를 운영하지 않을 계획이다라고 하면 인스턴스 삭제와 함께 해제해주는 것이 좋다. 잠깐 운영을 중단하는 경우에도 해제시킨 뒤 재할당 받으면 된다.

이렇게 만들어진 EC2에 접속하는 방법은 여러가지가 있지만 인스턴스 정보에서 연결 버튼을 눌러 콘솔에 접속해보자.
사진

## 보안설정

서버에 대한 일종의 방화벽을 설정하기 위해선 보안 그룹을 이용해야한다. 크게 두가지 설정이 보이는데 
1. 인바운드
2. 아웃바운드

인바운드는 외부에서 내부로 접속하는 권한을 설정하는 부분이고 아웃바운드는 내부에서 외부로의 접근을 설정하는 부분이다.