---
layout: post
title:  "네트워크의 원리"
author: 악어새62
categories: [ TIL, WEB, Backend ]
tags: [ ]
image: assets/images/5.jpg
---
## 개요

이거 정말 마법같다.  
근데 이거 정말 어떻게 가능한거지?

## 네트워크

우리는 어릴 때 실 전화기를 만들어 말해보면서 이런게 가능하구나 라는 것을 배웠었다.

네트워크 역시 처음에는 그러했다.  
지금이야 무선 통신 기술이 등장했지만 사실 전세계는 거대한 해저 케이블로 연결되어있다.

<img width="833" alt="스크린샷 2024-11-27 시간: 04 44 42" src="https://github.com/user-attachments/assets/f2fb7733-709b-4d01-8f8b-b96dd7a04fca">
![image](https://github.com/user-attachments/assets/bc57dfda-d075-419f-8961-5507eaff1d06)

만약 두 개의 컴퓨터끼리 통신이 필요하다면 다른 컴퓨터와 물리적으로 유선 혹은 무선으로 연결되어있어야한다.  
이러면 케이블이 하나만 있으면 된다.  
그러나 만약 컴퓨터 10개를 서로서로 연결하려면 총 45개의 케이블이 필요하다.  
컴퓨터가 많아지면 많아질수록 케이블은 그만큼 더 많이 필요해진다.  

그래서 라우터라는 것을 사용한다.  
라우터란 전화 연결원 혹은 콜센터와 같이 한쪽에서 들어오는 메시지를 다른 메시지에 전달하는 역할을 하는 소형 컴퓨터다.    
라우터가 있으면 두 개의 컴퓨터를 서로 연결하듯이 각 컴퓨터에서 뻗어나가는 하나의 케이블만 있으면 된다.  

이렇게 해서 하나의 컴퓨터 집단을 하나의 라우터로 연결하고 또 다른 라우터를 중심으로 연결된 컴퓨터들을 연결하려면 이 두 개의 라우터를 연결하는 식으로 마치 거미줄처럼 계속해서 확장시킬 수 있다.  
또한 라우터는 일종의 통신원 역할을 하기 때문에 여러 통신 경로를 명확히하고 가장 효율적인 경로를 찾는 것이 중요해진다. 여기서 여러가지 알고리즘이 도입된다. 다익스트라, RIP등이 있다.

그러나 만약 충분히 거리가 가깝지만 또 그렇게 가깝지만은 않은 거리의 네트워크와 연결하려면 어떻게해야할까?  
일반적인 가정집에는 이미 설비된 케이블이 있다.  
바로 전화다.  

우리의 네트워크를 전화시설에 연결한다. 그러기 위해서는 모뎀이라는 장비가 필요하다.  
아마 집에 인터넷이 느리거나 연결이 잘 안돼서 정비사를 불렀을 때 신발장 쪽 배선을 열어 체크하는 것을 본 적이 있을것이다. 그 기기가 바로 모뎀이다.  

모뎀은 네트워크 정보를 전화 시설에서 처리할 수 있는 정보로 바꾸고 그 반대도 마찬가지다.  
다음으론 우리의 네트워크에서 보내고자 하는 네트워크로 메시지를 보내는 것인데 이를 위해 ISP 즉, 인터넷 서비스 제공 업체에 연결한다. ISP는 다른 ISP의 라우터에도 엑세스할 수 있어서 통신사를 불문하고 연결할 수 있게 된다.  
따라서 우리 네트워크의 메시지는 ISP네트워크를 통해 대상 네트워크로 전달될 수 있는 것이다.
![image](https://github.com/user-attachments/assets/cd8b0e8b-0c70-4179-8c9f-07e392d2e796)

위의 과정을 OSI 7 계층의 관점에서 한 번 정리해보자.  
![image](https://github.com/user-attachments/assets/eba19673-463c-4c0c-88a3-4b1302f00df0)

OSI 7 Layers는 국제 표준화 기구에서 정한 네트워크 통신의 표준이다.  
1. 우리가 사용하는 웹 브라우저는 애플리케이션 계층에 속해있고 웹 브라우저로 접속하여 메일을 작성하는 경우다. 보내기 버튼을 누르면 작성 내용이 애플리케이션에 의해 SMTP프로토콜로 준비된다.  
2. 그런 다음 이미지의 내용이 적절한 데이터 형식으로 변환되고 필요하다면 데이터를 압축하고 암호화한다.(프레젠테이션 계층)  
3. 컴퓨터와 이메일 서버 간에 통신 세션을 설정한다.  
4. 이메일 데이터가 여러 작은 패킷으로 나뉜다. 패킷이란 정보를 아주 잘게 쪼갠 것이라고 보면 된다. 이렇게 작은 패킷이 중간에 뒤섞이거나 할 수 있으니 패킷에 일련번호를 붙여 수신자가 정확한 메시지를 받을 수 있도록 한다.(TCP 프로토콜)  
5. 이메일이 인터넷을 통해 수신자의 이메일 서버로 가는 경로를 설정한다.  
발신자의 IP주소와 수신자의 IP주소를 확인하고 라우터를 통해 최적의 경로를 찾아 데이터를 전달한다.
6. 이메일 패킷이 같은 네트워크에서 이동할 때 MAC주소를 사용해 실제 전송이 이루어진다.(MAC주소란 가지고 있는 네트워크 통신장비에 부여된 고유 번호이다. 노트북, 핸드폰 어디서나 직접 확인해볼 수 있다.) 이렇게 전송된 패킷은 네트워크 카드가 물리적인 신호로 변환한다.(네트워크 카드는 컴퓨터에 장착된 하드웨어 장치다.)
7. 데이터를 전기 신호나 무선 신호로 변환하여 케이블, 광섬유등을 통해 전송한다.

이렇게 해서 네트워크를 연결할 수 있다는 건 알았는데 그럼 특정 네트워크를 어떻게 식별할까?  
여기에는 우리에게 익숙한 IP라는 개념이 있다.

IP란 네트워크에 연결되어있는 컴퓨터의 고유한 주소를 말한다.  
그러나 우리는 실제로 아이피를 기억하고 있지 않다. 내가 메시지를 보내려는 네트워크의 IP를 알지도 못하고 정작 내가 사용하는 네트워크의 아이피도 알지 못한다.  
이게 가능한 이유는 도메인 네임이라는 개념 덕분이다.  

우리는 www.example.com과 같은 규칙을 가진 이름을 기억하고 있다.  
이게 바로 도메인 네임이다.
이렇게 도메인을 입력하면 DNS서버가 이를 통해 IP를 알아내고 서버에 연결시켜준다.  
일종의 전화번호부라고 볼 수도 있겠다.

이렇게 해서 우리가 인터넷을 사용할 수 있는 것이다.